import{D,t as b,y as I,C as U,N as y,J as l,_ as m,O as z,P as T,z as g,Q as B,R as L,S as O}from"./index-2eba7192.js";import"vue";function R(){const i=new Date,o=i.getDate(),u=i.getMonth()+1;return`${i.getFullYear()}-${u}-${o}`}const F={class:"p-4 space-y-5 min-h-[200px]"},J={class:"space-y-6"},j={class:"flex items-center space-x-4"},G={class:"flex-shrink-0 w-[100px]"},M={class:"flex-1"},P={class:"flex items-center space-x-4"},A={class:"flex-shrink-0 w-[100px]"},H={class:"w-[200px]"},W={class:"flex items-center space-x-4"},Q={class:"flex-shrink-0 w-[100px]"},Y={class:"flex-1"},q={class:"flex-shrink-0 w-[100px]"},K={class:"flex flex-wrap items-center gap-4"},X={class:"flex items-center space-x-4"},Z={class:"flex-shrink-0 w-[100px]"},ee={class:"flex flex-wrap items-center gap-4"},te={class:"flex items-center space-x-4"},ne={class:"flex-shrink-0 w-[100px]"},oe={class:"flex flex-wrap items-center gap-4"},ae={class:"flex items-center space-x-4"},se={class:"flex-shrink-0 w-[100px]"},le=Vue.defineComponent({__name:"General",setup(i){const o=D(),u=b(),{isMobile:V}=I(),a=U(),d=Vue.computed(()=>o.theme),s=Vue.computed(()=>u.userInfo),r=Vue.ref(s.value.avatar??""),h=Vue.ref(s.value.name??""),v=Vue.ref(s.value.description??""),x=Vue.computed({get(){return o.language},set(e){o.setLanguage(e)}}),w=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],_=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function N(e){u.updateUserInfo(e),a.success(g("common.success"))}function k(){u.resetUserInfo(),a.success(g("common.success")),window.location.reload()}function C(){const e=R(),t=localStorage.getItem("chatStorage")||"{}",n=JSON.stringify(JSON.parse(t),null,2),c=new Blob([n],{type:"application/json"}),f=URL.createObjectURL(c),p=document.createElement("a");p.href=f,p.download=`chat-store_${e}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p)}function S(e){const t=e.target;if(!t||!t.files)return;const n=t.files[0];if(!n)return;const c=new FileReader;c.onload=()=>{try{const f=JSON.parse(c.result);localStorage.setItem("chatStorage",JSON.stringify(f)),a.success(g("common.success")),location.reload()}catch{a.error(g("common.invalidFileFormat"))}},c.readAsText(n)}function E(){localStorage.removeItem("chatStorage"),location.reload()}function $(){const e=document.getElementById("fileInput");e&&e.click()}return(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",F,[Vue.createElementVNode("div",J,[Vue.createElementVNode("div",j,[Vue.createElementVNode("span",G,Vue.toDisplayString(e.$t("setting.avatarLink")),1),Vue.createElementVNode("div",M,[Vue.createVNode(Vue.unref(y),{value:r.value,"onUpdate:value":t[0]||(t[0]=n=>r.value=n),placeholder:""},null,8,["value"])]),Vue.createVNode(Vue.unref(l),{size:"tiny",text:"",type:"primary",onClick:t[1]||(t[1]=n=>N({avatar:r.value}))},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("common.save")),1)]),_:1})]),Vue.createElementVNode("div",P,[Vue.createElementVNode("span",A,Vue.toDisplayString(e.$t("setting.name")),1),Vue.createElementVNode("div",H,[Vue.createVNode(Vue.unref(y),{value:h.value,"onUpdate:value":t[2]||(t[2]=n=>h.value=n),placeholder:""},null,8,["value"])]),Vue.createVNode(Vue.unref(l),{size:"tiny",text:"",type:"primary",onClick:t[3]||(t[3]=n=>N({name:h.value}))},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("common.save")),1)]),_:1})]),Vue.createElementVNode("div",W,[Vue.createElementVNode("span",Q,Vue.toDisplayString(e.$t("setting.description")),1),Vue.createElementVNode("div",Y,[Vue.createVNode(Vue.unref(y),{value:v.value,"onUpdate:value":t[4]||(t[4]=n=>v.value=n),placeholder:""},null,8,["value"])]),Vue.createVNode(Vue.unref(l),{size:"tiny",text:"",type:"primary",onClick:t[5]||(t[5]=n=>N({description:v.value}))},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("common.save")),1)]),_:1})]),Vue.createElementVNode("div",{class:Vue.normalizeClass(["flex items-center space-x-4",Vue.unref(V)&&"items-start"])},[Vue.createElementVNode("span",q,Vue.toDisplayString(e.$t("setting.chatHistory")),1),Vue.createElementVNode("div",K,[Vue.createVNode(Vue.unref(l),{size:"small",onClick:C},{icon:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(m),{icon:"ri:download-2-fill"})]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(e.$t("common.export")),1)]),_:1}),Vue.createElementVNode("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:S},null,32),Vue.createVNode(Vue.unref(l),{size:"small",onClick:$},{icon:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(m),{icon:"ri:upload-2-fill"})]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(e.$t("common.import")),1)]),_:1}),Vue.createVNode(Vue.unref(z),{placement:"bottom",onPositiveClick:E},{trigger:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(l),{size:"small"},{icon:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(m),{icon:"ri:close-circle-line"})]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(e.$t("common.clear")),1)]),_:1})]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(e.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),Vue.createElementVNode("div",X,[Vue.createElementVNode("span",Z,Vue.toDisplayString(e.$t("setting.theme")),1),Vue.createElementVNode("div",ee,[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(w,n=>Vue.createVNode(Vue.unref(l),{key:n.key,size:"small",type:n.key===Vue.unref(d)?"primary":void 0,onClick:c=>Vue.unref(o).setTheme(n.key)},{icon:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(m),{icon:n.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),Vue.createElementVNode("div",te,[Vue.createElementVNode("span",ne,Vue.toDisplayString(e.$t("setting.language")),1),Vue.createElementVNode("div",oe,[Vue.createVNode(Vue.unref(T),{style:{width:"140px"},value:Vue.unref(x),options:_,onUpdateValue:t[6]||(t[6]=n=>Vue.unref(o).setLanguage(n))},null,8,["value"])])]),Vue.createElementVNode("div",ae,[Vue.createElementVNode("span",se,Vue.toDisplayString(e.$t("setting.resetUserInfo")),1),Vue.createVNode(Vue.unref(l),{size:"small",onClick:k},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("common.reset")),1)]),_:1})])])]))}}),ue={class:"ml-2"},re={class:"min-h-[100px]"},Ve=Vue.defineComponent({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(i,{emit:o}){const u=i,V=Vue.ref("General"),a=Vue.computed({get(){return u.visible},set(d){o("update:visible",d)}});return(d,s)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(B),{show:Vue.unref(a),"onUpdate:show":s[1]||(s[1]=r=>Vue.isRef(a)?a.value=r:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(L),{value:V.value,"onUpdate:value":s[0]||(s[0]=r=>V.value=r),type:"line",animated:""},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(O),{name:"General",tab:"General"},{tab:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(m),{class:"text-lg",icon:"ri:file-user-line"}),Vue.createElementVNode("span",ue,Vue.toDisplayString(d.$t("setting.general")),1)]),default:Vue.withCtx(()=>[Vue.createElementVNode("div",re,[Vue.createVNode(le)])]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{Ve as default};
